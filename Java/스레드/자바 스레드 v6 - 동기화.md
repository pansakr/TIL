### ë™ê¸°í™”

* ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ í•˜ë‚˜ì˜ ê³µìœ ìì›ì— ë™ì‹œì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ ë§‰ëŠ”ê²ƒ

* synchronized í‚¤ì›Œë“œ ë˜ëŠ” ë¸”ë¡ ì‚¬ìš©

```
public class ATM {
    private int balance = 0;
    public void addMoney(int amount) {
        balance += amount;
    }
    public int getBalance() {
        return balance;
    }

    // ì”ì•¡ ì°¨ê° ë©”ì„œë“œ
    // synchronizedê°€ ì—†ë‹¤ë©´ ì–´ë–¤ ì“°ë ˆë“œê°€ ì´ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•´ì„œ ì”ì•¡ ì°¨ê° ì™„ë£Œ í•˜ê¸° ì „ì— ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ë˜ ì‹¤í–‰í•´ì„œ ì”ì•¡ì´ -ê°€ ë  ìˆ˜ ìˆë‹¤.   
    synchronized public void withdraw (String name, int amount) {

        // ë©”ì†Œë“œ ë‚´ì˜ íŠ¹ì • ì‘ì—…ë§Œ ë™ê¸°í™”ê°€ í•„ìš”í•  ë•Œ ì‚¬ìš©
        // thisëŠ” í˜„ ì“°ë ˆë“œë¥¼ ì˜ë¯¸
        // synchronized ë¸”ë¡ ì‚¬ìš©ì‹œ ë©”ì†Œë“œì˜ synchronized í‚¤ì›Œë“œëŠ” ì œê±°í•´ì•¼ í•œë‹¤.
        //synchronized (this) {
        //}

        if (balance < amount) return;

        System.out.printf(
                "ğŸ’° %s ì¸ì¶œ ìš”ì²­ (í˜„ ì”ì•¡ %d)%n",
                name, balance
        );
        try {
            Thread.sleep(new Random().nextInt(1000));
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }
        balance -= amount;
        System.out.printf(
                "âœ… %s ì¸ì¶œ ì™„ë£Œ (í˜„ ì”ì•¡ %d)%n",
                name, balance
        );
    }
}

public class CustomerRun implements Runnable {
    String name;
    ATM atmToUse;
    int needed;

    public CustomerRun(String name, ATM atmToUse, int needed) {
        this.name = name;
        this.atmToUse = atmToUse;
        this.needed = needed;
    }
    @Override
    public void run() {
        while (atmToUse.getBalance() > needed) {
            atmToUse.withdraw(name, needed);

            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                throw new RuntimeException(e);
            }
        }
    }
}

public class Main {
    public static void main(String[] args) {
        ATM atm = new ATM();
        atm.addMoney(5000);

        Thread thr1 = new Thread(
                new CustomerRun("ì² ìˆ˜", atm, 500)
        );
        Thread thr2 = new Thread(
                new CustomerRun("ì˜í¬", atm, 300)
        );
        Thread thr3 = new Thread(
                new CustomerRun("ëŒì¤€", atm, 400)
        );

        thr1.start();
        thr2.start();
        thr3.start();
    }
}
```
