### 보조기억장치

* 주기억장치의 단점을 보완하기 위한 장치로 주기억장치보다 속도는 느리지만 용량이 큰 저장장치(비휘발성)

* 보조 기억장치에 저장된 데이터나 프로그램을 사용한다면 먼저 RAM으로 복사해 사용한다

* 하드디스크(HDD), 광학디스크(CD-ROM, DVD), 플래시 메모리(USB, SD 카드), SSD 등이 있다.

#### 하드 디스크(HDD - Hard Disk Drive)

<img src="https://github.com/pansakr/TIL/assets/118809108/5f2e2cc1-ff93-44f9-9746-ca9f93c49c7d">

* 플래터라 불리는 원판 모양의 자기 디스크로 이루어져 있다.

* 자기 디스크가 고속으로 회전하며 정보를 읽고 쓴다.

* 자기 디스크를 줄로 나누고 각각의 1줄을 트랙이라 하고, 트랙을 균등하게 나눈것을 섹터라고 한다.

* 한 섹터에 10만번 이상 OverWrite(덮어쓰기)하게되면 더이상 그 공간을 사용할 수 없게 되고 이를 베드섹터라 한다.

* 섹터 하나는 512MB이고 이는 너무 작기에 섹터 몇개를 묶어 클러스터라 하고 이곳에 데이터를 저장한다.

* 즉 클러스터가 HDD의 최소 저장 단위이다.

* 한 클러스터에 지정 용량보다 적게 저장해도 한 공간을 모두 쓴 것으로 간주하기에 남은 공간을 사용하지 못한다.

* 지정 용량보다 많이 저장할시 한 클러스터를 모두 채우고 남는 클러스터는 랜덤한 다른 클러스터에 이어 저장한다.

* 이런 경우가 많아지게 되면 조각 났다고 표현하며, 입출력의 성능이 떨어지게 된다.

* 이때 할 수 있는 것이 디스크 조각 모음이다.

* 한 트랙에 조각났던 정보를 이어 붙여주기 때문에 디스크가 한번 돌때 전부 읽을 수 있어서 성능이 올라가게 된다.


### 플래시 메모리

* 전기적으로 데이터를 읽고 쓸 수 있는 반도체 기반의 저장 장치

* 데이터를 저장하는 가장 단위를 '셀' 이라고 하며 이 셀이 모여 MB, GB, TB 용량을 가진다

* 하나의 셀에 몇 비트를 저장할 수 있느냐에 따라 SLC, MLC, TLC 로 나뉜다

* SLC(Single Level Cell)

    - 한 셀에 1비트를 저장할 수 있는 플래시 메모리(2개의 정보 표현)

    - 비트의 빠른 입출력이 가능하며 수명이 제일 길다

    - 하지만 용량 대비 가격이 높아 고성능의 빠른 저장 장치가 필요한 경우에 사용한다

* MLC(Multilple Level Cell)

    - 한 셀에 2비트를 저장할 수 있는 플래시 메모리(4개의 정보 표현)

    - SLC 보다 저렴하다

* TLC(Triple Level Cell)

    - 한 셀에 3비트를 저장할 수 있는 플래시 메모리(8개의 정보 표현)

    - SLC, MLC 에 비해 수명과 속도가 떨어지지만 용량 대비 가격이 저렴하다 

* 셀들이 모여 만들어진 단위를 '페이지', 페이지가 모여 만들어진 단위를 '블록', 블록이 모여 '플레인', 플레인이 모여 '다이' 가 된다

* 플래시 메모리에서 읽기와 쓰기는 페이지 단위로 이루어지며 삭제는 블록 단위로 이루어진다

* SSD(Solid State Drive)

    - 플래시 메모리 칩을 사용해 데이터를 저장하는 보조기억장치

    - 하드디스크의 자기 디스크가 칩으로 바뀐것으로 똑같이 트랙과 섹터로 관리한다.

    - 디스크가 돌아가면서 읽는게 아니라 칩에 저장하기 때문에 조각모음이 의미가 없고 칩 자체의 성능으로 결정난다.

### 컴퓨터가 기억공간을 관리하는 방법

* 정보가 저장된 위치를 숫자나 일련번호로 표시해 관리한다.

* 레지스터는 공간마다 고유 이름을 붙인다.

* 주 기억장치는 일련번호를 붙인다.

* 보조기억장치는 트랙과 섹터 번호를 붙여 관리한다.


#### RAID

* 데이터의 안정성이나 성능을 위해 여러개의 하드 디스크나 SSD를 하나의 장치처럼 사용하는 기술

* RAID 구성 방법을 RAID 레벨이라 하며 대표적으로 RAID 0 ~ RAID 6 이 있고, 0, 1, 4, 5, 6 이 대중적이다

* RAID 0

    - 여러 개의 보조기억 장치에 데이터를 단순히 나누어 저장하는 구성 방식

    <img src="raid 1">
    
    - 1TB 하드 디스크 4개로 RAID 0 을 구성했다면 데이터가 저장될때 하드 디스크 개수만큼 나뉘어 저장된다
 
      - ex) 하드 디스크가 4개니 8GB 의 데이터는 2GB씩 나뉘어 저장된다
     
    - 이렇게 분산되어 저장된 데이터를 '스트라입' 이라고 하며, 분산하여 저장하는 것을 '스트라이핑' 이라고 한다

    - 데이터를 분산해 저장하면 읽고 쓰는 속도가 빨라진다

        - 하나의 대용량 저장 장치에 저장했으면 여러 번에 걸쳐 읽고 쓸 데이터를 동시에 읽고 쓸 수 있기 때문이다
     
        - 4TB 저장 장치 한 개를 읽고 쓰는 속도보다 RAID 0 으로 구성된 1TB 저장 장치 네 개의 속도가 이론상 네 배 빠르다
     
    - 하지만 구성된 하드디스크 중 하나라도 문제가 생기면 다른 모든 하드 디스크의 정보를 읽는데 문제가 생긴다
 
* RAID 1

    - 복사본을 만드는 구성 방식
 
    - RAID 0 처럼 데이터 스트라이핑을 사용하지만 문제가 생길 경우를 대비해 동일한 구성의 복사본을 만든다
 
          - 1TB 하드 디스크 2개로 RAID 0 을 구성하고(원본), 다시 1TB 하드 디스크 2개로 이것과 동일한 복사본을 만든다

          - 4GB 데이터가 저장될 때 원본에 데이터 스트라이핑이 사용되어 2GB씩 저장되고, 복사본에 원본과 동일한 데이터가 저장된다

    - 원본과 복사본 두 곳에 데이터를 쓰기 때문에 쓰기 속도는 RAID 0 보다 느리다
 
    - 똑같은 구성의 저장 장치가 두개가 있어서 복구가 간단하다
 
    - 하지만 하드 디스크 개수가 한정되었을 때 사용 가능한 용량이 적어진다
 
          - RAID 0은 1TB 4개로 4TB 를 저장할 수 있는 반면 RAID 0 은 복사본을 만들기 위해 2TB 만 저장할 수 있다

          - 많은 양의 하드 디스크가 필요해 비용이 증가한다

* RAID 4

    - 오류를 검출하고 복구하기 위한 정보를 저장한 장치를 두는 구성 방식
 
    - 오류를 검출하고 복구하기 위한 정보를 '패리티 비트'라 하며 이를 사용해 다른 장치들의 오류를 검출하고, 오류가 있다면 복구한다
 
    <img src="raid 4">
