### 물리 계층과 데이터 링크 계층

* 두 계층 모두 이더넷으로 구현된다

* 이더넷

    - 컴퓨터나 네트워크 장비 간에 데이터를 주고받기 위해 사용하는 유선 네트워크 기술

    - 다양한 통신 매체의 규격, 송수신되는 프레임의 형태와 프레임을 주고받는 방법을 정의하고 있다

    - 유선 LAN 환경은 대부분 이더넷을 기반으로 구성된다

    - IEEE 802.3 은 이더넷 표준으로 통신 매체와 네트워크 장비들은 이 표준을 준수한다

* 물리 계층의 이더넷

    - 실제로 데이터를 전송하는 하드웨어적인 부분을 담당

    - 데이터를 0과 1의 비트로 변환하고, 비트를 전기 신호, 무선 신호 등으로 변환해 케이블과 같은 통신 매체를 통해 전송한다

    - 비트로 변환하는 데이터는 데이터 링크 계층으로부터 받은 프레임이다

* 데이터 링크 계층의 이더넷

    - 노드 간 데이터 전송을 관리

    - 프레임을 정의하고 주소 지정과 에러 검출의 기능을 수행한다

    - 이더넷 프레임에는 데이터와 목적지/수신지의 MAC 주소를 포함하고 있다

* 프레임

    - 데이터 링크 계층의 이더넷 네트워크에서 주고받는 데이터 단위, 데이터 링크 계층의 PDU

    - 상위 계층으로부터 받아들인 정보에 헤더와 트레일러를 추가하는 캡슐화 과정을 통해 만들어진다
 
        - 프레임을 사용하는 데이터 링크의 상위 계층인 네트워크 계층으로부터 패킷을 받아 헤더와 트레일러를 추가한 것이 프레임이다     

        - 수신지 입장에서는 프레임의 헤더와 트레일러를 제거한 뒤 상위 계층으로 올려보내는 역캡슐화 과정을 거친다

    - 이더넷 프레임의 헤더, 페이로드, 트레일러로 이루어져 있다

    - 이더넷 프레임의 헤더 구성 요소

        - 프리앰블

            - 프레임의 시작을 알리는 8바이트 크기의 정보

        - 수신지와 송신지의 MAC 주소

            -  MAC 주소는 네트워크 인터페이스마다 부여되는 주소로 LAN 내의 수신지와 송신지를 특정할 수 있다

            - MAC 주소는 고유하고 NIC 라는 장치마다 부여되어 있다

        - 타입/길이

            - 어떤 정보를 캡슐화 했는지 나타내는 정보

            - 상위 계층에서 사용된 프로토콜의 이름이 명시된다

    - 이더넷 프레임의 페이로드

        - 데이터

            - 상위 계층에서 전달받거나 상위 계층으로 전달해야 할 내용

    - 이더넷 프레임의 트레일러

        - FCS

            - 수신한 이더넷 프레임에 오류가 있는지 확인하기 위한 필드

            - 여기서 오류 검출이 이어진다

### 물리 계층과 데이터 링크 계층의 네트워크 장비

### 통신 매체

* 물리 계층에서 사용되는 요소

* 실제 데이터 전송이 이루어지는 물리적 경로를 제공

* 주로 케이블이 해당한다

    - 트위스티드 페어 케이블

        - 구리 선으로 전기 신호를 주고받는 통신 매체

        - 신호를 주고 받다 보면 전자적 간섭이 생길 수 있는데 이를 '노이즈'라 한다

        - 구리 선 주변을 감싸 노이즈를 감소시키는 방식을 '차폐'라 하고 이를 적용한 케이블을 보통 차폐 케이블이라고 한다

    - 광섬유 케이블

        - 빛을 이용해 정보를 주고받는 케이블

        - 전기 신호를 이용하는 케이블에 비해 속도도 빠르고 먼 거리까지 전송이 가능하며 노이즈로부터 간섭받는 영향도 적다

        - 대륙간 네트워크 연결에 사용한다

* 통신 매체의 표기 형태

    - 전송 속도

        - 숫자만 표기시 Mbps, 숫자 뒤에 G가 붙으면 Gbps를 의미한다

        - ex) 10 -> 10Mbps, 10G -> 10Gbps

    -  BASE

        - 변조 타입을 의미한다
    
        *변조타임 : 비트 신호로 변환된 데이터를 통신 매체로 전송하는 방법

    -  추가 특성

        - 통신 매체의 특성을 명시한다

        - 전송 가능한 최대 거리나 물리 계층 인코딩 방식 등을 명시한다

    -  통신 매체 종류

        - C - 동축 케이블

        - T - 트위스티드 페어 케이블

        - S - 단파장 광섬유 케이블

        - L - 장파장 광섬유 케이블

    - 최종 표기 형태

        - 10BASE-T 케이블 : 10Mbps 속도를 지원하는 트위스테드 페어 케이블

        - 1000BASE-SX 케이블 : 1000Mbps 속도를 지원하는 단파장 광섬유 케이블

        *케이블 : 여러 가닥의 전선이 한데 묶어 절연체나 보호막으로 감싸져 있는 구조로 NIC에 연결되는 물리 계층의 유선 통신 매체

### NIC(Network Interface Controller)

* 컴퓨터가 네트워크에 연결되기 위한 물리적인 장치 또는 논리 인터페이스

* 물리계층, 데이터 링크 계층 모두에 해당하는 장치

* MAC 주소는 NIC 마다 중복되지 않게 부여되는 주소로, LAN 내의 수신지와 송신지를 특정할 수 있다

* 통신 매체에는 전기, 빛 등 다양한 신호가 흐르는데, 송신시 물리 계층의 NIC 가 이 신호를 비트로 변환한 다음 데이터 링크 계층의 NIC가 비트를 프레임으로 변환하고, 수신시 반대로 변환한다

* 개념상 NIC를 두 계층으로 나누었지만 실제로는 NIC에서 두 과정은 동시에 이루어진다

* 네트워크 인터페이스 카드, LAN 카드, 네트워크 어댑터 등으로 불린다

### 허브

* 여러대의 호스트를 연결하는 물리 계층의 장비

* 커넥터를 연결할 수 있는 연결 지점인 포트를 가지고 있으며 포트를 통해 통신 매체로 호스트와 연결할 수 있다

* 허브는 물리 계층의 장비고, 물리 계층은 주소 개념이 없기에 허브는 신호를 받으면 조작이나 판단을 하지 않고 송신지를 제외한 모든 포트에 내보내기만 한다

* 반이중 모드로 통신한다

    - 송수신을 번갈아 하면서 하는 통신 방식

    - A와 B가 통신할때 한쪽이 송신하면 다른 쪽은 송신할 수 없다

    - 동시 송수신이 불가능하다

    - 만약 동시에 허브에 신호를 송신하면 충돌(콜리전)이 발생한다

    *전이중 모드 통신 : 송수신을 동시에 양방향으로 할 수 있는 통신 
    
* 현대 인터넷에서 잘 사용하지 않는 장비다

### 스위치

* 데이터 링크 계층의 네트워크 장비. L2 스위치 라고도 부른다

* 스위치의 여러 포트에 호스트를 연결할 수 있다

* 허브와 달리 MAC 주소를 학습해 특정 MAC 주소를 가진 호스트에만 프레임을 전달할 수 있고, 전이중 모드의 통신을 지원한다

* MAC 주소 학습을 위해 포트와 연결된 MAC 주소 간의 연관 관계를 메모리에 표 형태로 기억하고 이를 MAC 주소 테이블이라 한다

    - MAC 주소 학습은 프레임 내 '송신지 MAC 주소'를 바탕으로 이루어진다

    - 처음 MAC 주소 테이블은 비어 있다가 포트와 연결된 호스트로부터 프레임을 수신하면 해당 프레임을 수신한 포트와, 프레임 내의 송신지 MAC 주소를 MAC 주소 테이블에 저장한다

    - 그리고 송신지 포트를 제외한 모든 포트로 프레임을 전송하는데 그 중 수신지 한 곳을 제외한 나머지 호스트는 자신과 관련이 없는 프레임을 전송받았으므로 이를 폐기한다

    - 수신지는 스위치로 응답 프레임을 전송하고 해당 프레임을 수신한 포트와, 프레임 내의 송신지 MAC 주소를 MAC 주소 테이블이 저장한다

    - 이제 두 호스트에 대한 MAC 주소를 알고 있으므로 해당 호스트들이 프레임을 주고받을 때는 다른 포트로 프레임을 보낼 필요가 없다

* VLAN

    - 가상의 LAN을 만드는 것

    - 하나의 물리적 스위치로 여러 대의 스위치가 있는 것처럼 LAN을 구성할 수 있다

    - 하나의 스위치에 8개의 포트가 있을때 4개씩 나눠 다른 LAN에 있는 것처럼 구성하면 양측은 다른 LAN에(네트워크) 있는 것처럼 인식한다

    - 한 VLAN 에 속한 호스트가 브로드캐스트를 해도 다른 VLAN에 속한 호스트에게 전달되지 않는다
