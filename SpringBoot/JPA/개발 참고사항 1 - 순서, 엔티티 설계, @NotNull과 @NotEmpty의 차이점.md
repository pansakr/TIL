### 애플리케이션 개발 순서 예시

* 요구사항 분석

    - 회원 기능 : 등록, 조회, 수정

    - 상품 기능 : 등록, 수정, 조회, 삭제

    - 주문 기능 : 상품 주문, 주문 내역 조회, 주문 취소

    - 기타 요구사항 : 상품은 재고 관리 필요, 상품의 종류는 xx 등이 있다

* 도메인 모델과 테이블 설계

    - 필요한 테이블들을 구성하고 테이블관의 관계도 구성(일대일, 일대다 등)

    - 도메인 모델로 엔티티 구성

* 서비스, 리포지토리 계층 개발 -> 테스트 케이스 작성해서 검증 -> 웹 계층 적용

### 엔티티 설계시 주의점

* 엔티티에는 가급적 Setter 를 사용하지 말것

    - Setter 가 모두 열려있으면 변경 포인트가 너무 많아서 유지보수 및 애플리케이션을 파악하기 어렵다

    - 아무곳에서나 값을 변경할수 있기 때문에 어디서 엔티티를 변경했는지 찾기 어렵다  

* 모든 연관관계는 지연로딩으로 설정

    - 즉시 로딩 문제점
    
        -  연관 데이터를 한꺼번에 가져와서 성능이 떨어진다

        - 연관 데이터를 join 해서 가져오기 때문에 어떤 sql 이 실행될지 예상하기 어렵다

        - JPQL 을 실행할 때 N + 1 문제가 자주 발생한다

* 엔티티 API로 외부에 노출하면 안된다

    - 엔티티가 변경되면 API 스펙도 변경된다

### 비즈니스 로직 작성 참고사항

* 도메인 모델 패턴, 트랜잭션 스크립트 패턴 중 상황에 맞게 사용

* 도메인 모델 패턴

    - 엔티티가 비즈니스 로직을 가지고 있는 것

    - 서비스 게층은 엔티티에 필요한 기능을 요청하는 역할을 한다

    - 엔티티가 자신을 변경하거나 생성하는 메서드를 가짐으로서 자연스럽다

    - 개인적으로 더 나아 보임

- 트랜잭션 스크립트 패턴

    - 엔티티에 비즈니스 로직이 거의 없고 서비스 계층에서 대부분의 비즈니스 로직을 처리하는 것

### 레이아웃 설정 방법

* 부트스트랩 다운로드

    - https://getbootstrap.com/ 접속 -> 중앙에 다운로드 클릭

    - Compiled CSS and JS 글 밑의 다운로드 클릭

    - 압축 풀고 폴더내의 css, js 폴더 복사해서 recources/static 에 복사

* 인식 안될 경우

    - recources 우클릭 -> reload from disk 클릭

    - 상단의 build 탭 -> Build Project 클릭

    - 서버 재실행

### @NotNull, @NotEmpty, @NotBlank 의 차이점

* @Column(nullable = false) 

    - JPA에서 엔티티의 필드에 적용되는 어노테이션
    
    - 이 필드가 매핑된 데이터베이스의 컬럼에 NOT NULL 제약조건을 걸어줌
    
        - 엔티티의 필드가 아닌, DB 의 컬럼에 NOT NULL 제약 설정

    - 애플리케이션 레벨에서의 유효성 검사는 제공하지 않으므로, 만약 애플리케이션에서 null 값을 해당 필드에 직접 할당하려고 하면 JPA 자체에서 바로 예외가 발생하지는 않는다
    
        - 이 경우, 데이터베이스에 실제로 저장하려고 할 때 NOT NULL 제약에 의해 예외 발생

    - 정리하면, @Column(nullable = false)는 데이터베이스의 컬럼에 NOT NULL 제약을 걸어주는 기능을 제공하는 것이지, 애플리케이션 레벨에서 null 할당을 방지하는 것은 아니다

* @NotNull

    - null 만 허용하지 않음

    - 값이 비어있더라도 null만 아니면 제약을 만족

* @NotEmpty

    - null, "" 허용하지 않음
 
    - 문자열, 컬렉션, 배열에 사용


* @NotBlank

    - null, "", 공백 허용하지 않음
 
    - 문자열 전용
