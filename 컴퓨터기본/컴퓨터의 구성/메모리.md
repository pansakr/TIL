### 메모리(기억장치)의 종류와 역할

#### Register

* 휘발성 메모리

* cpu가 요청을 처리하는데 필요한 데이터를 임시 저장하는 cpu 내부에 존재하는 기억장치

* cpu가 요청을 처리하려면 메모리에 가서 데이터를 가져와 처리한 후 다시 메모리로 보내준다.

* 데이처를 처리하기 전, 후로 임시로 저장할 공간이 필요한데 그것이 레지스터이다.

* cpu와 메모리의 데이터를 가져올때 이를 전송해주는 선이 있는데 이것을 bus라고 한다.

* 컴퓨터에서 사용하는 32 / 64 비트는 메모리의 데이터를 한번에 들고 올 수 있는 레지스터의 비트 수이다.

* 64비트 프로그램은 레지스터로 한번에 64비트씩 넘기기 때문에 32비트를 들고 올 수 있는 32비트 운영체제에서는 실행하지 못한다.

* 32비트 프로그램은 64비트 운영체제에서 효율이 낮아지지만 실행은 가능하다.


#### Cache memory

* 휘발성 메모리

* cpu와 ram의 의 속도 차이를 메우기 위해 데이터를 임시로 저장해 두는 기억장치

* CPU는 속도가 매우 빠르고 RAM은 속도가 느리다. 

* CPU의 처리 속도보다 RAM이 처리에 필요한 데이터를 넘기는 속도를 맞추지 못해 성능 저하가 발생하게 된다.

* 이 문제를 해결하기 위해 사용하는 것이 캐시 메모리이다.

* 캐시 메모리는 CPU가 처리를 하고있을때 메모리로부터 처리에 데이터를 들고와 저장해놓는다.

* CPU는 메모리가 데이터를 넘겨줄때까지 기다릴 필요 없이 캐시 메모리가 들고온 데이터를 바로 처리한다.

* 캐시 메모리도 CPU 내부에 있기 때문에 CPU가 바로 접근이 가능하다.

* CPU는 먼저 캐시에 필요한 데이터가 존재하는지 확인 후 있다면 캐시 데이터를 읽어 처리한다.


#### 캐시 메모리의 적중률

* 캐시 메모리는 메모리로부터 CPU가 처리할 데이터를 예측해서 가져온다.

* cpu가 캐시에서 필요한 데이터를 찾을 확률을 Hit rate(적중률)이라고 한다.

* 캐시 메모리가 가져온 데이터가 CPU에서 필요한 데이터라면 Cache Hit, 틀렸다면 Cache Miss라고 한다.

* Cache Miss라면 cpu가 메모리에 직접 접근해서 가져와야 하기 때문에 성능이 떨어지게 된다.

* 캐시 메모리의 성능은 Hit rate에 의해 결정된다.


#### RAM(Random Access Memory) - 주기억장치

* CPU가 실행할 대상이 저장되는 휘발성 메모리

  - 비휘발성인 보조기억장치에는 보관할 대상을 저장하고, RAM에는 실행할 대상을 저장한다

  - CPU는 보조기억장치에 직접 접근하지 못해 실행하고 싶은 프로그램이 보조기억장치에 있다면 이를 RAM으로 복사하여 저장한 뒤 실행한다

  - RAM 용량이 크면 많은 데이터를 가져와 미리 RAM에 저장할 수 있어 많은 프로그램을 동시에 실행하는데 좋다

  - RAM 용량이 적으면 다른 프로그램을 실행할 때 마다 보조기억장치에서 프로그램을 RAM으로 가져와야 하기 때문에 시간이 더 걸린다

* 일반적으로 주기억장치라고 하면 RAM을 의미한다.

* 메모리 1바이트마다 주소(일련번호)가 붙는다.

* 32bit에서는 표현할 수 있는 숫자 범위는 약 42.9억 이고 메모리의 주소 단위는 1바이트이므로 최대 4gb까지 사용할 수 있다.

* 4Gb 이상은 32비트 cpu가 인식하지 못해서 메모리 용량이 많더라도 사용할 수 없다.

* DRAM(Dynamic RAM)

  - 시간이 지나면 저장된 데이터가 점차 사라지는 RAM
 
  - 데이터의 소멸을 막기 위해 일정 주기로 데이터를 다시 저장해야 한다
 
  - 단점에도 불구하고 소비 전력이 낮고 저렴하고 집적도가 높아 일반적으로 사용한다

  *집적도 - 더 작고 빽빽하게 만들 수 있다

* SRAM(Static Ram)

  - 저장된 데이터가 사라지지 않는 RAM
 
  - 비휘발성 메모리인 것은 아니다. 전원이 공급되지 않으면 저장된 내용이 날아간다
 
  - 소비 전력이 크고 가격이 비싸고 집적도가 낮아 캐시 매모리에서 사용된

* SDRAM(Synchronous Dynimic RAM)

  - 클럭과 동기화된 DRAM

  - 클럭마다 cpu와 정보를 주고받을 수 있는 발전된 형태의 DRAM

* DDR SDRAM(Double Data Rate SDRAM)

  - 대역폭을 넓혀 속도를 빠르게 만든 SDRAM

  - SDRAM 이 한 클럭에 하나씩 cpu와 정보를 주고받는다면 DDR SDRAM 은 한 클럭에 두 번씩 cpu와 정보를 주고받는다
 
  - DDR2 SDRAM 은 DDR SDRAM보다 대역폭이 두배 넓으며, SDRAM 보다 4배 넓다
    
  - 최근에는 DDR5 SDRAM 을 주로 사용한다 

  *대역폭 - 데이터를 주고받는 길의 너비

*Access = 컴퓨터에서 기억장치에 대해 데이터의 쓰기나 읽기를 하는 행위


#### ROM(Read only Memory)

* 읽기만 가능한 읽기 전용 메모리(컴퓨터 제작회사에서 제작 시 기억시켜 둔 정보를 읽기만 가능) 

* 기본 입출력 시스템(BIOS), 글자 폰트, 자가진단 프로그램(POST, Power On Slef Test) 등이 저장되어 있다.

* 비휘발성 메모리이다.

*휘발성 저장 공간, 비휘발성 저장 공간 = 전원 공급이 차단될때 데이터가 사라지면 휘발성, 그렇지 않으면 비휘발성


#### 버퍼

* 하나의 장치에서 다른 장치로 데이터를 전송할 때 서로의 데이터의 전송 속도나 처리 속도의 차이를 극복하기 위한 임시 저장 공간


#### 동영상 스트리밍에서의 버퍼

* 동영상은 영상이 진행되는 빨간색 부분, 서버로부터 동영상을 내려받은 회색부분, 아직 받지 않은 투명부분으로 구분할 수 있다.

* 만약 동영상을 보는 속도와 데이터를 받는 속도가 같다면 동영상 시간만큼 데이터를 받아야 한다.

* 이를 방지하기 위해 버퍼라는 임시 저장공간을 두고 동영상 데이터를 일정 부분 최대한 빠르게 받아 저장해 둔다.

* 동영상을 보다 보면 버퍼에 동영상이 모두 다운로드 되어 있다.

* 인터넷이 느리던 시절에는 동영상을 버퍼에 다운로드 하는 속도가 시청속도를 따라가지 못해 동영상이 멈추는 일이 있었고 이를 버퍼링 걸린다 라고 이야기했었다.


#### 입출력에서의 버퍼

* cpu와 보조기억장치 사이에서 사용되는 임시 저장 공간을 의미한다.

* cpu는 매우 빠르게 데이터를 처리할 수 있지만 보조기억장치는 데이터를 보내주는 속도가 매우 느리다.

* 이 경우 cpu가 아무리 빨라도 데이터를 보내주는 속도가 느리니 효율성이 매우 떨어지게 된다.

* 그리고 타자를 빠른 속도로 입력할때 컴퓨터가 성능이나 상황에 따라 입력되는 속도에 맞춰 데이터를 입력하지 못한다면 데이터를 유실할 수 있다.

* 이 때 버퍼를 사용하는데 버퍼는 보조기억장치보다 훨씬 빠른 주기억 장치(RAM)을 이용한다.

* 보조기억장치가 버퍼에 데이터를 보내 임시 저장해두면 cpu가 다른 일을 처리하다가 어느정도 쌓이면 한꺼번에 가져와서 처리한다.


#### 보조기억장치

* 주기억장치의 단점을 보완하기 위한 장치로 주기억장치보다 속도는 느리지만 용량이 크다. 비휘발성이다.

* 보조 기억장치에 저장된 데이터나 프로그램을 사용한다면 먼저 RAM으로 복사하고 CPU에 보내 데이터를 처리한다  

* 하드디스크(HDD), 광학디스크(CD-ROM, DVD), 플래시 메모리(USB, SD), SSD 등이 있다.

#### HDD

<img src="https://github.com/pansakr/TIL/assets/118809108/5f2e2cc1-ff93-44f9-9746-ca9f93c49c7d">

* 플래터라 불리는 원판 모양의 자기 디스크로 이루어져 있다.

* 자기 디스크가 고속으로 회전하며 정보를 읽고 쓴다.

* 자기 디스크를 줄로 나누고 각각의 1줄을 트랙이라 하고, 트랙을 균등하게 나눈것을 섹터라고 한다.

* 한 섹터에 10만번 이상 OverWrite(덮어쓰기)하게되면 더이상 그 공간을 사용할 수 없게 되고 이를 베드섹터라 한다.

* 섹터 하나는 512MB이고 이는 너무 작기에 섹터 몇개를 묶어 클러스터라 하고 이곳에 데이터를 저장한다.

* 즉 클러스터가 HDD의 최소 저장 단위이다.

* 한 클러스터에 지정 용량보다 적게 저장해도 한 공간을 모두 쓴 것으로 간주하기에 남은 공간을 사용하지 못한다.

* 지정 용량보다 많이 저장할시 한 클러스터를 모두 채우고 남는 클러스터는 랜덤한 다른 클러스터에 이어 저장한다.

* 이런 경우가 많아지게 되면 조각 났다고 표현하며, 입출력의 성능이 떨어지게 된다.

* 이때 할 수 있는 것이 디스크 조각 모음이다.

* 한 트랙에 조각났던 정보를 이어 붙여주기 때문에 디스크가 한번 돌때 전부 읽을 수 있어서 성능이 올라가게 된다.


### SSD

* 하드디스크의 자기 디스크가 칩으로 바뀐것으로 똑같이 트랙과 섹터로 관리한다.

* 디스크가 돌아가면서 읽는게 아니라 칩에 저장하기 때문에 조각모음이 의미가 없고 칩 자체의 성능으로 결정난다.

### 컴퓨터가 기억공간을 관리하는 방법

* 정보가 저장된 위치를 숫자나 일련번호로 표시해 관리한다.

* 레지스터는 공간마다 고유 이름을 붙인다.

* 주 기억장치는 일련번호를 붙인다.

* 보조기억장치는 트랙과 섹터 번호를 붙여 관리한다.
