### git reset

* 코드를 이전시점으로 되돌린다.

```
// 해시코드에 해당하는 커밋시점으로 돌아가고 이후의 변경 이력은 모두 삭제한다.
git reset --hard 해시코드 

// 변경 이력은 모두 삭제하지만 파일은 unStage 상태로 남아있다.
// unStage 상태기 때문에 반영하려면 add로 반영하고 commit 해야한다. 
git reset -- mixed 해시코드

// 변경 이력을 모두 삭제하지만 파일은 남아있고 stage되어있다.
// add 필요없이 바로 commit 가능하다.
commit reset --soft 해시코드
```

* 원격 저장소의 코드를 받아 reset하고 push하면 reset 이후의 커밋 기록이 삭제되었기 때문에 push하려는 파일과 원격 저장소의 파일이 일치하지 않아 오류가 난다.

* 공유 상태의 저장소는 reset을 사용하면 안된다.


### git revert

* 특정 시점의 작업만 되돌려 커밋을 추가한다.

* 되돌리려는 커밋에서 했던 작업의 반대방향으로 진행한 뒤 새로운 커밋으로 저장된다.

* 협업할때는 반드시 revert를 사용해야 한다.

```
// a,b,c파일 추가 후 1번 커밋의 내용을 되돌리고 싶을때, 즉 b,c는 놔두고 a파일만 삭제하고 싶을때 사용한다.

git commit -m "1번 커밋"  // a파일 추가
git commit -m "2번 커밋"  // b파일 추가
git commit -m "3번 커밋"  // c파일 추가

// 1번 커밋작업의 반대방향. a파일을 삭제 후 커밋한다.
git revert 1번커밋 해시코드

git log
Revert "1번 커밋" // Revert라는 이름으로 커밋이 더해졌다.
3번 커밋
2번 커밋
1번 커밋
```

* revert할때 충돌이 나면 충돌 파일의 작업 상태를 지정해줘야 한다.

```
git commit -m "1번 커밋"  // a파일 추가
git commit -m "2번 커밋"  // b파일 추가
git commit -m "3번 커밋"  // c파일 추가, a파일 수정

// a파일 충돌로 오류뜬다.
git revert 1번커밋 해시코드 

// revert명령으로 a파일을 삭제해야 하는데 3번에서 a를 수정해서 발생한 충돌이고 a파일을 삭제하던지 다른 방법으로 충돌을 해결해 줘야 한다.

// 충돌난 a파일 삭제
git rm a.txt

// 이후 revert 계속하기
git revert --continue
```

* 커밋하지 않고 revert

```
// 특정 시점의 작업만 되돌리고 커밋은 하지 않는다.
// 원하는 다른 작업을 추가한 다음 함께 커밋할 수 있다.
git revert --no-commit 해시코드
```

### git reflog

* 실수로 reset해서 git log에 복구할 커밋이 남아있지 않을 때 사용한다.
```
// 모든 커밋 기록 확인. 이전 버전으로 복구하려할때 커밋 기록이 남아있지 않을 시 사용한다.
git reflog
```
* git reflog하면 한번이라도 커밋했다면 그 기록을 모두 출력해준다.

* 원하는 버전의 해시값을 찾아서 git reset 명령어로 복구한다.
