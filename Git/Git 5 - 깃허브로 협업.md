### Collaborator 로 푸시 권한 주기

* 내 저장소는 기본적으로 다른 사람이 푸시할 수 없지만, Collaborator 로 추가해 권한을 줄 수 있다

    - 권한을 줄 원격 저장소 -> 상단의 Setting -> 왼쪽 상단의 Collaborators

    - Add a Collaborators 에 등록할 계정 이름 입력 후 전송 -> 해당 유저가 승인 시 Collaborators 로 등록되어 푸시 권한 획득

    - 하지만 원격 저장소의 소유자가 원하지 않는 변경사항이 추가되는 문제 때문에 사용하지 않는다

    - 상관없는 파일을 추가/삭제 하거나 잘못 수정하는 문제 발생 가능

* 여러 문제 때문에 Collaborator 대신 풀 리퀘스트 (pull request) 를 사용

### 풀 리퀘스트

* 원격 저장소가 내 변경사항을 풀(pull) 하도록 요청하는 방법

    - Collaborator 와 다르게 원격 저장소에 푸시 권한이 없다

    - 변경사항을 요청하면 원격 저장소 소유자가 수락해야 병합되는 방법이다

* 순서

    - 기여하려는(변경사항을 생성하려는) 원격 저장소를 본인 계정으로 포크

        - 포크 : 원격 저장소를 내 계정으로 복제하는 것

        - 소유하지 않은 원격 저장소에는 푸시 불가능, 하지만 포크한 원격 저장소에는 푸시 가능

    - 포크한 저장소를 클론

    - 브랜치 생성 후 생성한 브랜치에서 작업

    - 작업한 브랜치를 원격 저장소에 푸시

        - 원격에 푸시하면 풀 리퀘스트 버튼이 생성됨

    - 풀 리퀘스트 보내기

        - 저장소 소유주는 요청을 받은 저장소의 Pull Request 탭에서 확인할 수 있다

        - 들어가보면 풀 리퀘스트가 open 상태로 열려 있고, 상대가 보낸 변경 사항과 내용 확인 가능

        - 수락/거절 해서 병합하거나, 하지 않을수 있고 댓글로 메시지를 남기거나 내용에 대해 논의할 수도 있다

### 깃허브 협업 예시

#### pull 사용

* 원격 저장소 H 에는 main 브랜치에 h.txt 하나가 있고 A, B 두 사용자가 이 저장소를 공동으로 사용하는 중

    - A 가 원격 저장소 클론 후 A 브랜치 생성해서 작업 진행

    - 이어서 B 가 원격 저장소 클론 후 B 브랜치 생성한 다음 b.txt 만들고 커밋

        - main 브랜치와 병합 후 원격 저장소에 푸시

        - 현재 원격 저장소 히스토리 : h.txt -> h.txt, b.txt (B 의 작업)

    - A 가 뒤늦게 a.txt 생성 후 main 브랜치와 병합한 다음 원격 저장소에 푸시 시도

        - 그러나 원격 저장소에 변경 사항이 생겼기 때문에 푸시 거부됨

        - 화면에 fetch + merge 혹은 pull 먼저 하라고 출력됨

        - pull 실행

            - git 이 자동으로 fetch 먼저 실행
            
            - fetch 데이터는 origin/main 브랜치에 저장됨. 로컬 브랜치 적용 x

            - 이어서 merge 자동 실행

                - 현재 상황 : A 브랜치는 이미 로컬 main 브랜치에 병합된 상태

                - 로컬의 main 과 fetch 로 가져온 origin/main 에 있는 원격의 변경 사항을 병합 

        - 현재 원격 저장소 히스토리 : h.txt -> h.txt, b.txt (B 의 작업) -> h.txt, b.txt, a.txt (A 의 작업)


#### fetch + merge 사용 (권장)

* 위 상황에서 A 가 A 브랜치를 병합하기 전에(a.txt 작업도중) fetch 자주 사용하기

    - 변경사항 미리 확인 가능

* 원격에 변경사항이 생길 시 origin/main 에 저장됨. 로컬 브랜치 적용 x

* origin/main 을 로컬의 main 과 병합

    - 작업 도중이라면 stash 로 임시 저장 후 원격의 변경사항을 로컬 main 과 병합, 이후 stash pop 으로 복원

    - 작업 완료(커밋) 이후라면 로컬 main 에 A 브랜치나 origin/main 둘 중 어느 것을 먼저 병합해도 상관 없음(최종 결과는 동일) 

* 원격 저장소에 푸시

    - 원격의 변경사항을 미리 확인 후 병합했기 때문에 푸시 거부되지 않음
