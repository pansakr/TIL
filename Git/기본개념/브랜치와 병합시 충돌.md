### 브랜치

* 작업을 진행하기 위한 공간

```
// 브랜치 생성
git branch 브랜치이름

// 브랜치 삭제
git branch -d 브랜치이름

// 원격 브랜치 삭제
git push 원격이름 --delete 원격의 브랜치명

// 브랜치 목록 보기
git branch     // 로컬 브랜치 목록
git branch -a  // 원격 브랜치를 포함한 목록

// 브랜치 이름 변경. -m은 move의 약자이다.
git branch -m 기존브랜치이름 새브랜치이름

// 브랜치 변경
// 2.23버전부터 git checkout이 switch, restore로 분리되었다. 여전히 checkout도 사용 가능하지만 이제 브랜치 변경시 switch를 사용하는것이 권장된다.
git switch 브랜치이름

// 브랜치 생성과 변경 동시에 하기
git switch -c 브랜치이름
```

### 로컬에서 브랜치 만들어 원격에 push

* 로컬에서 브랜치 생성 후 push한다.

* 원격 저장소에 브랜치가 생성되어있지 않아도 로컬에서 생성해 push하면 로컬에서 생성한 브랜치 이름이 원격 저장소에 생성된다.

```
git push // 새로운 브랜치가 원격 저장소와 연결되지 않았기 때문에 push할 수 없다.

// 연결할 저장소와 브랜치를 명시해준다.
// push 뒤에 -u옵션을 사용하면 다음 push부턴 git push로 업로드할 수 있다.
git push origin 연결할 브랜치이름

// 로컬에서 브랜치 생성 후 push할땐 원격의 브랜치를 명시해야 한다.
```

### 원격 브랜치 로컬에 받아오기

* 로컬에서 git fetch로 원격의 변경사항을 확인 후 원격과 같은 이름의 브랜치를 생성 후 연결한다.

```
// 원격의 변경사항 확인
git fetch

// 받을 원격의 브랜치이름과 같은 브랜치를 생성 후 연결하고 내용을 복사한다.
git switch -t 원격 브랜치이름
```

### 브랜치 병합 merge

* 서브 브랜치의 커밋들을 메인 브랜치의 새로운 한 커밋에 합치고 기존 서브 브랜치의 커밋 기록들은 남아있다.  

* 브랜치 사용내역을 남길 필요가 있을때 적합한 방식이다.

```
// 서브 브랜치를 main에 merge할 경우 main으로 이동해서 서브 브랜치를 merge한다.
git merge 병합할 브랜치이름
```

### 브랜치 병합 rebase

* 브랜치를 다른 브랜치에 이어붙인다.

* 병합할 서브 브랜치의 커밋들을 메인 브랜치에 그대로 이어붙이고 기존 서브 브랜치의 커밋 기록들은 삭제된다.

* 한 줄로 정리된 기록을 유지하길 원할때 사용한다.

* 이미 공유된 커밋들에 대해서는 사용하지 말아야 한다.

```
// 서브 브랜치를 main에 rebase할 경우 서브 브랜치로 이동해서 main브랜치로 rebase 한다.
// merge와 반대이다.
git rebase 브랜치이름 (여기서는 메인브랜치)

// main브랜치의 시점을 rebase한 서브 브랜치로 이동시켜준다.
// merge이기 때문에 main으로 이동 후 실행한다.
git switch 브랜치이름 (여기서는 메인브랜치)

git maerge 브랜치이름 (여기서는 서브브랜치)
```

### merge, rebase 충돌 해결

* 파일의 같은 위치에 다른 내용이 입력됬을때 병합하면 충돌이 발생한다.

```
// merge 충돌시
git merge 브랜치이름 -> 충돌 발생!!

// 메인, 서브 브랜치에 a.txt파일이 있고, 메인에는 hello, 서브에는 bye라고 적혀있어 서로 다른 상황이다. 

// 이 상황에서 합치면 git은 둘 중 어느것을 선택해야 할지 몰라 충돌 오류를 발생시킨다.

// 이때는 사용자가 둘 중 하나만 선택, 둘 모두를 선택, 새로운 내용을 입력, 중 하나를 선택해서 충돌을 직접 해결해줘야 한다.

// 충돌 발생 파일에 충돌 부분이 나타난다.
<<<<<<< HEAD
manager: Kenneth
=======
manager: Deborah
>>>>>>> conflict-1

// HEAD(헤더가 가리키고있는 메인 브랜치)의 내용 manager: Kenneth과 
// ======== <- 구분자
// conflict-1 브랜치의 내용 manager : Deborah가 충돌한다는 뜻이다.

// manager: Kenneth를 남기던지 manager: Deborah를 남기던지 둘다 선택하던지 둘다 지우고 새로 작성하던지 해야한다.

// 파일을 직접 수정해 충돌 해결 후 add -> commit 진행한다.
git add .
git commit // 충돌 수정 후에는 메시지 부분을 제외하고 입력하면 vim모드로 이동되고, 커밋 메시지를 확인후 :wq입력해 저장 후 빠져나가면 커밋이 완료된다.

// merge 취소. 당장 충돌 해결이 어려울 경우 merge 중단한다.
git merge --abort
```

```
// rebase 충돌시
// rebase는 커밋들 하나하나를 합치는 방식이기 때문에 커밋마다 충돌이 있을시 각각 해결해줘야 한다.

// merge와 마찬가지로 충돌 파일을 직접 수정하고 add -> git rebase --continue 한다.
git add .
git rebase -- continue  // rebase할 다음 커밋의 충돌이 없으면 완료, 있다면 다음 커밋의 충돌부분이 에러메시지로 뜬다.

// 충돌 부분이 더 있어 에러메시지가 떴다면 해결 후 다시 git rebase -- continue 입력.
// 정상적으로 rebase가 완료될 때까지 반복한다.

// main에도 변경사항을 적용하기 위해 main브랜치로 이동해 rebase한 브랜치와 merge해준다.
git merge rebase한 브랜치

// rebase는 커밋들을 그대로 이어붙이기 때문에 2개의 커밋을 rebase했다면 메인 브랜치에 2개의 커밋이 추가된다.
// 그런데 rebase과정에 충돌이 나서 해결 과정에 main쪽을 선택했다면 해당 커밋은 변경사항이 없어지는 셈이고, rebase의 의미도 없어지기 때문에 커밋이 기록되지 않는다.

// rebase 취소
git rebase --abort
```
